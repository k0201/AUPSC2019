Version 4
SHEET 1 880 680
WIRE -320 16 -416 16
WIRE -288 16 -320 16
WIRE 720 48 96 48
WIRE 96 80 96 48
WIRE -416 96 -416 16
WIRE -288 96 -288 16
WIRE 720 96 720 48
WIRE -288 176 -336 176
WIRE 720 208 720 176
WIRE 96 224 96 160
WIRE -416 240 -416 176
WIRE -336 240 -336 176
WIRE -336 240 -416 240
FLAG 96 224 0
FLAG -336 240 0
FLAG 720 208 0
FLAG -320 16 vin
SYMBOL bi2 96 80 R0
SYMATTR InstName B1
SYMATTR Value I={floor(V(VIN)/vrange*nlevels)/nlevels*vrange}/50-20m
SYMBOL voltage -416 80 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value SINE(1V 1V 15meg)
SYMBOL res -304 80 R0
SYMATTR InstName R1
SYMATTR Value 1k
SYMBOL res 704 80 R0
SYMATTR InstName R2
SYMATTR Value 1000
TEXT 120 296 Left 2 !.param vrange=2\n.param nlevels=1024
TEXT 16 -152 Left 2 !.tran 0 100n 0 .001n
